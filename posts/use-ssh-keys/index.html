<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Mohammed Tayeh ">
<meta name="description" content="Set up your first SSH keys Use SSH keys for authentication without password when you are connecting to your server. simple and secure login process.
To Generate a new SSH Key [root@server ~]$ ssh-keygen Generating public/private rsa key pair. Enter file in which to save the key (/root/.ssh/id_rsa): Enter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in /root/.ssh/id_rsa. Your public key has been saved in /root/." />
<meta name="keywords" content="tayeh, Mohammed Tayeh, tips" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://tayeh.me/posts/use-ssh-keys/" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-1XPWRCJ5NQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1XPWRCJ5NQ');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2909878942998418"
     crossorigin="anonymous"></script>

    <title>
        
            Use SSH keys for authentication :: Hi! I&#39;m Mohammed Tayeh 😄  — Site Reliability Engineering (DevOps Engineer)
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.f689dc56b9999a2a00143dd7de85be2983b831b46ccfe143481bb16d3bd1451b.css">



    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="">


<meta itemprop="name" content="Use SSH keys for authentication">
<meta itemprop="description" content="Set up your first SSH keys Use SSH keys for authentication without password when you are connecting to your server. simple and secure login process.
To Generate a new SSH Key [root@server ~]$ ssh-keygen Generating public/private rsa key pair. Enter file in which to save the key (/root/.ssh/id_rsa): Enter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in /root/.ssh/id_rsa. Your public key has been saved in /root/.">
<meta itemprop="datePublished" content="2020-11-17T04:01:59-10:00" />
<meta itemprop="dateModified" content="2020-11-17T04:01:59-10:00" />
<meta itemprop="wordCount" content="413">
<meta itemprop="image" content="https://tayeh.me"/>



<meta itemprop="keywords" content="tips," />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://tayeh.me"/>

<meta name="twitter:title" content="Use SSH keys for authentication"/>
<meta name="twitter:description" content="Set up your first SSH keys Use SSH keys for authentication without password when you are connecting to your server. simple and secure login process.
To Generate a new SSH Key [root@server ~]$ ssh-keygen Generating public/private rsa key pair. Enter file in which to save the key (/root/.ssh/id_rsa): Enter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in /root/.ssh/id_rsa. Your public key has been saved in /root/."/>




    <meta property="og:title" content="Use SSH keys for authentication" />
<meta property="og:description" content="Set up your first SSH keys Use SSH keys for authentication without password when you are connecting to your server. simple and secure login process.
To Generate a new SSH Key [root@server ~]$ ssh-keygen Generating public/private rsa key pair. Enter file in which to save the key (/root/.ssh/id_rsa): Enter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in /root/.ssh/id_rsa. Your public key has been saved in /root/." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://tayeh.me/posts/use-ssh-keys/" />
<meta property="og:image" content="https://tayeh.me"/>
<meta property="article:published_time" content="2020-11-17T04:01:59-10:00" />
<meta property="article:modified_time" content="2020-11-17T04:01:59-10:00" /><meta property="og:site_name" content="Hi! I&#39;m Mohammed Tayeh 😄" />






    <meta property="article:published_time" content="2020-11-17 04:01:59 -1000 -1000" />










    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd ~</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about/">~/about</a></li><li><a href="/posts">~/posts</a></li><li><a href="/uses">~/uses</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
                <span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
   <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
   3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
   13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
 </svg></span>
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        2 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="https://tayeh.me/posts/use-ssh-keys/">Use SSH keys for authentication</a>
      </h1>

      

      

      

      <div class="post-content">
        <h2 id="set-up-your-first-ssh-keys">Set up your first SSH keys</h2>
<p>Use SSH keys for authentication without password when you are connecting to your server. simple and secure login process.</p>
<h3 id="to-generate-a-new-ssh-key">To Generate a new SSH Key</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@server ~<span style="color:#f92672">]</span>$ ssh-keygen 
Generating public/private rsa key pair.
Enter file in which to save the key <span style="color:#f92672">(</span>/root/.ssh/id_rsa<span style="color:#f92672">)</span>: 
Enter passphrase <span style="color:#f92672">(</span>empty <span style="color:#66d9ef">for</span> no passphrase<span style="color:#f92672">)</span>: 
Enter same passphrase again: 
Your identification has been saved in /root/.ssh/id_rsa.
Your public key has been saved in /root/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:kxPyLTxxqwobFXoOxxxABaDD0xxnZzCB6xxxf38 root@server
The key<span style="color:#960050;background-color:#1e0010">&#39;</span>s randomart image is:
+---<span style="color:#f92672">[</span>RSA 2048<span style="color:#f92672">]</span>----+
|<span style="color:#f92672">=</span>+<span style="color:#f92672">==</span>*            |
|xo.o <span style="color:#f92672">=</span>           |
|+oo.O .          |
|<span style="color:#f92672">=</span>o.* * o         |
|.x. <span style="color:#f92672">=</span> X S        |
| .   O *         |
|    o <span style="color:#f92672">=</span> o        |
|     + qo.x.   P |
|    . .xx+o..o.  |
+----<span style="color:#f92672">[</span>SHA256<span style="color:#f92672">]</span>-----+

</code></pre></div><h3 id="first-way-copy-the-public-key-to-your-server-using-the-command">First way: Copy the public key to your server using the command</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@server ~<span style="color:#f92672">]</span>$ ssh-copy-id root@&lt;instance_ip&gt;
/usr/bin/ssh-copy-id: INFO: Source of key<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span> to be installed: <span style="color:#e6db74">&#34;/root/.ssh/id_rsa.pub&#34;</span>
The authenticity of host <span style="color:#e6db74">&#39;&lt;instance_ip&gt; (&lt;instance_ip&gt;)&#39;</span> can<span style="color:#e6db74">&#39;t be established.
</span><span style="color:#e6db74">ECDSA key fingerprint is SHA256:aF/iyxxxKqx1LUyM/uyr/xxxxxxxxxxx.
</span><span style="color:#e6db74">ECDSA key fingerprint is MD5:xx:c3:xx:48:b4:ef:xx:e4:58:a4:xx:14:c1:xx:c5:af.
</span><span style="color:#e6db74">Are you sure you want to continue connecting (yes/no)? yes
</span><span style="color:#e6db74">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
</span><span style="color:#e6db74">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
</span><span style="color:#e6db74">root@&lt;instance_ip&gt;&#39;</span>s password: 

Number of key<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span> added: <span style="color:#ae81ff">1</span>

Now try logging into the machine, with:   <span style="color:#e6db74">&#34;ssh &#39;root@&lt;instance_ip&gt;&#39;&#34;</span>
and check to make sure that only the key<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span> you wanted were added.

</code></pre></div><h3 id="second-way-download-the-public-key-to-your-server-using-the-github-gitlab">Second way: Download the public key to your server using the Github, Gitlab</h3>
<ul>
<li>upload your key to Github or Gitlab: <code>settings -&gt;  SSH keys -&gt; New SSH key</code></li>
<li>after uoload the SSH key you can access key on <a href="https://github.com/tayeh.keys">Github</a>, <a href="https://gitlab.com/tayeh.keys">Gitlab</a></li>
</ul>
<p>now you can import the SSH key using curl command</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@server ~<span style="color:#f92672">]</span>$ curl -L https://github.com/tayeh.keys &gt;&gt; ~/.ssh/authorized_keys
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@server ~<span style="color:#f92672">]</span>$ curl -L https://github.com/tayeh.keys &gt;&gt; ~/.ssh/authorized_keys
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
<span style="color:#ae81ff">100</span>  <span style="color:#ae81ff">1315</span>  <span style="color:#ae81ff">100</span>  <span style="color:#ae81ff">1315</span>    <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">6015</span>      <span style="color:#ae81ff">0</span> --:--:-- --:--:-- --:--:--  <span style="color:#ae81ff">6032</span>
</code></pre></div><blockquote>
<p>note this way will import all keys on your github account</p>
</blockquote>
<p>now you can access your server without password try:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ssh root@&lt;instance_ip&gt;
</code></pre></div><h3 id="turn-off-password-authentication">Turn off password authentication</h3>
<p>With SSH key authentication, you can disable password authentication for SSH to prevent brute-forcing.
<strong>open SSH configuration file</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vim /etc/ssh/sshd_config
</code></pre></div><p><strong>search for</strong> <code>PasswordAuthentication</code> and <code>PermitRootLogin</code> change it to:</p>
<pre><code>PasswordAuthentication no
PermitRootLogin without-password
</code></pre><p><strong>Restart the SSH service</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">systemctl restart sshd
</code></pre></div><h3 id="conclusions">Conclusions</h3>
<p>Remember to always keep your private keys safe.</p>

      </div>
    </article>

    <hr />

    <div class="post-info">
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://tayeh.me/tags/tips/">tips</a></span>
        
    </p>

      

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        413 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2020-11-17 16:01
        

         
          
        
      </p>
    </div>

    
    <div class="pagination">
        
        <div class="pagination__title">
            <span class="pagination__title-h">Read other posts</span>
            <hr />
        </div>
        

        <div class="pagination__buttons">
            
            <span class="button previous">
                <a href="https://tayeh.me/posts/github_actions_via_ssh/">
                    <span class="button__icon">←</span>
                    <span class="button__text">How to automate a deploy with GitHub actions via SSH</span>
                </a>
            </span>
            

            
        </div>
    </div>


    

    

  </main>

            </div>

            
                <footer class="footer">
    
    
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.599099f1f14b78b657d524b28e10e0c5098e7cd46e9c7aed73d577068a276c3ff1bb234cbf29cb313333e83cf411727b43157c91ce5b809e2ffc81664614608e.js" integrity="sha512-WZCZ8fFLeLZX1SSyjhDgxQmOfNRunHrtc9V3BoonbD/xuyNMvynLMTMz6Dz0EXJ7QxV8kc5bgJ4v/IFmRhRgjg=="></script>



    </body>
</html>
